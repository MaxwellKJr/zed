// Zed global settings
//
// For information on how to configure Zed, see the Zed
// documentation: https://zed.dev/docs/configuring-zed
{
  // General editor settings
  "autosave": "on_focus_change",
  "format_on_save": "on",
  "theme": "Solarized Dark Origin",
  "base_keymap": "VSCode",
  "ui_font_size": 15,
  "buffer_font_size": 12.5,
  "buffer_font_family": "Hack Nerd Font",
  "buffer_font_features": {
    "ligatures": true,
    "font_size": 12
  },
  "vim_mode": true,
  "relative_line_numbers": true,

  // Editor appearance
  "line_numbers": true,
  "soft_wrap": "preferred_line_length",
  "preferred_line_length": 90,
  "show_invisibles": true,
  "highlight_current_line": true,
  "highlight_current_column": true,
  "highlight_matching_brackets": true,
  "highlight_matching_tags": true,
  "show_whitespace_errors": true,
  "icon_theme": "VSCode Icons (Dark)",
  "show_file_icons": true,
  "show_folder_icons": true,
  "show_git_status": true,

  // Terminal settings
  "terminal": {
    "font_size": 12,
    "line_height": "standard",
    "scrollback_lines": 10000,
    "show_scrollbar": true,
    "scrollbar_width": 8,
    "scrollbar_color": "#fff",
    "scrollbar_hover_color": "#aaa",
    "scrollbar_active_color": "#ccc",
    "font_family": "Hack Nerd Font",
    "font_features": {
      "ligatures": true,
      "font_size": 12
    }
  },

  // Copilot integration
  "features": {
    "edit_prediction_provider": "copilot"
  },
  "show_edit_predictions": true,

  // File type associations
  "file_types": {
    "Astro": ["*.astro"],
    "TSX": ["*.tsx", "*.jsx"]
  },

  // Language-specific settings
  "languages": {
    "Astro": {
      "tab_size": 2,
      "format_on_save": "on",
      "formatter": "language_server",
      "soft_wrap": "preferred_line_length",
      "preferred_line_length": 90,
      "show_completion_documentation": true
    },
    "JavaScript": {
      "tab_size": 2,
      "format_on_save": "on",
      // "formatter": {
      //   "external": {
      //     "command": "prettier",
      //     "arguments": ["--stdin-filepath", "{buffer_path}"]
      //   }
      // },
      "soft_wrap": "preferred_line_length",
      "preferred_line_length": 90,
      "show_completion_documentation": true,
      "code_actions_on_format": {
        "source.fixAll.eslint": true
      },
      "language_servers": ["eslint"]
    },
    "TypeScript": {
      "tab_size": 2,
      "format_on_save": "on",
      // "formatter": {
      //   "external": {
      //     "command": "prettier",
      //     "arguments": ["--stdin-filepath", "{buffer_path}"]
      //   }
      // },
      "soft_wrap": "preferred_line_length",
      "preferred_line_length": 90,
      "show_completion_documentation": true,
      "code_actions_on_format": {
        "source.fixAll.eslint": true
      },
      "language_servers": ["eslint"]
    },
    "TSX": {
      "tab_size": 2,
      "format_on_save": "on",
      // "formatter": {
      //   "external": {
      //     "command": "prettier",
      //     "arguments": ["--stdin-filepath", "{buffer_path}"]
      //   }
      // },
      "code_actions_on_format": {
        "source.fixAll.eslint": true
      },
      "language_servers": ["eslint"]
    },
    "JSON": {
      "format_on_save": "on"
    }
  },

  // Language server protocol (LSP) settings
  "lsp": {
    "astro-language-server": {
      "initialization_options": {
        "typescript": {
          "tsdk": "./node_modules/typescript/lib"
        }
      }
    },
    "eslint": {
      "settings": {
        "codeActionOnSave": {
          "enable": true,
          "mode": "fixAll",
          "rules": [
            "import/order",
            "import/newline-after-import",
            "prefer-template",
            "no-unused-vars",
            "@typescript-eslint/no-unused-vars"
          ]
        },
        "workingDirectory": { "mode": "auto" }
      }
    }
  },

  // Prettier configuration (for other file types)
  "prettier": {
    "allowed": true,
    "plugins": ["prettier-plugin-astro", "prettier-plugin-tailwindcss"],
    "tabWidth": 2,
    "bracketSpacing": true,
    "trailingComma": "es5",
    "semi": true,
    "jsxSingleQuote": false,
    "singleQuote": false,
    "printWidth": 80
  },

  // Enable debug logging to verify formatting and linting
  "log_level": "debug"
  // Disable Git gutter (commented out as in your original)
  // "git": {
  //   "git_gutter": "disabled"
  // }
}
